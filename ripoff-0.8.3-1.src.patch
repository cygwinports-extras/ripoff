diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/lib/Makefile.am src/ripoff-0.8.3/lib/Makefile.am
--- origsrc/ripoff-0.8.3/lib/Makefile.am	2007-11-08 13:18:00.000000000 -0600
+++ src/ripoff-0.8.3/lib/Makefile.am	2007-11-08 21:41:45.031250000 -0600
@@ -15,4 +15,5 @@
                        RipOffPluginRawInterface.h \
 		       $(PACKAGE).xpm
 libripoff_la_LIBADD = @XML_LIBS@ @GTK_LIBS@
+libripoff_la_LDFLAGS = -no-undefined
 libripoff_la_CFLAGS= @GTK_CFLAGS@ @XML_CFLAGS@
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/plugins/flac/FlacPlugin.c src/ripoff-0.8.3/plugins/flac/FlacPlugin.c
--- origsrc/ripoff-0.8.3/plugins/flac/FlacPlugin.c	2007-11-08 13:17:58.000000000 -0600
+++ src/ripoff-0.8.3/plugins/flac/FlacPlugin.c	2007-11-08 22:40:20.640625000 -0600
@@ -535,7 +535,7 @@
 	{
 		case 0:	FLAC__stream_encoder_set_max_lpc_order(plugin->encoder, 0);
 			FLAC__stream_encoder_set_blocksize(plugin->encoder, 1152);
-			FLAC___stream_encoder_set_do_mid_side_stereo(plugin->encoder, FALSE);
+			FLAC__stream_encoder_set_do_mid_side_stereo(plugin->encoder, FALSE);
 			FLAC__stream_encoder_set_loose_mid_side_stereo(plugin->encoder, FALSE);
 			FLAC__stream_encoder_set_min_residual_partition_order(plugin->encoder, 2);
 			FLAC__stream_encoder_set_max_residual_partition_order(plugin->encoder, 2);
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/plugins/flac/Makefile.am src/ripoff-0.8.3/plugins/flac/Makefile.am
--- origsrc/ripoff-0.8.3/plugins/flac/Makefile.am	2007-11-08 13:17:58.000000000 -0600
+++ src/ripoff-0.8.3/plugins/flac/Makefile.am	2007-11-08 22:30:04.234375000 -0600
@@ -1,11 +1,11 @@
 if HAVE_FLAC
 
-libflac_PROGRAMS =  libflac.so
+libflac_LTLIBRARIES =  libflac.la
 endif
 
 INCLUDES = -I $(top_srcdir)
 libflacdir = @plugindir@
-libflac_so_SOURCES = FlacPlugin.c
-libflac_so_LDADD =  -lFLAC
-libflac_so_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ -fPIC
-libflac_so_LDFLAGS = -shared 
+libflac_la_SOURCES = FlacPlugin.c
+libflac_la_LIBADD = $(top_builddir)/lib/libripoff.la @GTK_LIBS@ -lFLAC
+libflac_la_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ 
+libflac_la_LDFLAGS = -module -avoid-version -no-undefined 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/plugins/lame/Makefile.am src/ripoff-0.8.3/plugins/lame/Makefile.am
--- origsrc/ripoff-0.8.3/plugins/lame/Makefile.am	2007-11-08 13:17:58.000000000 -0600
+++ src/ripoff-0.8.3/plugins/lame/Makefile.am	2007-11-08 22:30:12.062500000 -0600
@@ -1,12 +1,12 @@
 if HAVE_MP3
 
-liblame_PROGRAMS =  liblame.so
+liblame_LTLIBRARIES =  liblame.la
 
 endif
 
 INCLUDES = -I $(top_srcdir)
 liblamedir = @plugindir@
-liblame_so_SOURCES = LamePlugin.c
-liblame_so_LDADD =  -lmp3lame
-liblame_so_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ -fPIC
-liblame_so_LDFLAGS = -shared 
+liblame_la_SOURCES = LamePlugin.c
+liblame_la_LIBADD = $(top_builddir)/lib/libripoff.la @GTK_LIBS@ -lmp3lame
+liblame_la_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ 
+liblame_la_LDFLAGS = -module -avoid-version -no-undefined 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/plugins/vorbis/Makefile.am src/ripoff-0.8.3/plugins/vorbis/Makefile.am
--- origsrc/ripoff-0.8.3/plugins/vorbis/Makefile.am	2007-11-08 13:17:58.000000000 -0600
+++ src/ripoff-0.8.3/plugins/vorbis/Makefile.am	2007-11-08 22:30:19.218750000 -0600
@@ -1,12 +1,12 @@
 if HAVE_OGGVORBIS
 
-libvorbis_PROGRAMS =  libvorbis.so
+libvorbis_LTLIBRARIES =  libvorbis.la
 
 endif
 
 INCLUDES = -I $(top_srcdir)
 libvorbisdir = @plugindir@
-libvorbis_so_SOURCES = VorbisPlugin.c
-libvorbis_so_LDADD =  -logg -lvorbis -lvorbisenc
-libvorbis_so_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ -fPIC
-libvorbis_so_LDFLAGS = -shared 
+libvorbis_la_SOURCES = VorbisPlugin.c
+libvorbis_la_LIBADD = $(top_builddir)/lib/libripoff.la @GTK_LIBS@ -logg -lvorbis -lvorbisenc
+libvorbis_la_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ 
+libvorbis_la_LDFLAGS = -module -avoid-version -no-undefined 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/plugins/wav/Makefile.am src/ripoff-0.8.3/plugins/wav/Makefile.am
--- origsrc/ripoff-0.8.3/plugins/wav/Makefile.am	2007-11-08 13:17:58.000000000 -0600
+++ src/ripoff-0.8.3/plugins/wav/Makefile.am	2007-11-08 22:32:34.500000000 -0600
@@ -1,7 +1,8 @@
-libwav_PROGRAMS =  libwav.so
+libwav_LTLIBRARIES =  libwav.la
 
 INCLUDES = -I $(top_srcdir)
 libwavdir = @plugindir@
-libwav_so_SOURCES = WavPlugin.c
-libwav_so_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ -fPIC
-libwav_so_LDFLAGS = -shared 
+libwav_la_SOURCES = WavPlugin.c
+libwav_la_LIBADD = $(top_builddir)/lib/libripoff.la @glib_LIBS@
+libwav_la_CFLAGS =  @GTK_CFLAGS@ @XML_CFLAGS@ 
+libwav_la_LDFLAGS = -module -avoid-version -no-undefined 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/ripoff-0.8.3/src/main.c src/ripoff-0.8.3/src/main.c
--- origsrc/ripoff-0.8.3/src/main.c	2007-11-08 13:17:59.000000000 -0600
+++ src/ripoff-0.8.3/src/main.c	2007-11-08 22:28:00.640625000 -0600
@@ -18,8 +18,6 @@
 #include <fcntl.h>
 #include <unistd.h>
 #include <cdio/cdio.h>
-#include <sys/ioctl.h>
-#include <linux/cdrom.h>
 #include "lib/RipOff.h"
 #include "RipOffPreferences.h"
 #include "RipOffCore.h"
@@ -73,16 +71,15 @@
 
 void initial_cd_status(RipOffPreferences prefs, RipOffCore core)
 {
-	gint drive;
-	gint drive2;
+	CdIo_t *drive;
 	const gchar *device_path;
 	gchar *error_message;
 	extern GtkWidget *status_bar;
 
 	device_path = ripoff_preferences_get_cd_device_path(prefs);
-	drive = open(device_path, O_RDONLY | O_NONBLOCK, S_IRWXO);
+	drive = cdio_open(device_path, DRIVER_DEVICE);
 
-	if(drive == -1)
+	if(drive == NULL)
 	{
 		error_message = g_malloc(strlen(device_path) + strlen(" is not a valid device.")
 					 +1);
@@ -96,6 +93,7 @@
 	else
 	{
 	
+#if 0
 		drive2 = ioctl(drive, CDROM_DRIVE_STATUS);
 
 		if(drive2 != CDS_DISC_OK)
@@ -106,6 +104,7 @@
 		}
 
 		else if(drive2 == CDS_DISC_OK)
+#endif
 		{
 			ripoff_core_set_album(core, "Untitled Album");
 			ripoff_core_set_artist(core, "Unknown Artist");
@@ -116,24 +115,23 @@
 			gtk_statusbar_push(GTK_STATUSBAR(status_bar), 1, "CD successfully read");
 		}
 
-		close(drive);
+		free(drive);
 	}
 		
 }
 
 gboolean monitor_cd(gpointer ptr)
 {
-	gint drive;
-	gint drive2;
+	CdIo_t *drive;
 	extern GtkWidget *status_bar;
 	const gchar *device_path;
 	gchar *error_message;
 	RipOffCore core = (RipOffCore) ptr;
 	
 	device_path = ripoff_preferences_get_cd_device_path(core->prefs);
-	drive = open(device_path, O_RDONLY | O_NONBLOCK, S_IRWXO);
+	drive = cdio_open(device_path, DRIVER_DEVICE);
 
-	if(drive == -1)
+	if(drive == NULL)
 	{
 		error_message = g_malloc(strlen(device_path) + strlen(" is not a valid device.")
 					 +1);
@@ -148,6 +146,7 @@
 
 	else
 	{
+#if 0
 		drive2 = ioctl(drive, CDROM_DRIVE_STATUS);
 
 		if(drive2 != CDS_DISC_OK && !ripoff_drive_not_ready)
@@ -163,6 +162,7 @@
 		}
 
 		else if(drive2 == CDS_DISC_OK && ripoff_drive_not_ready)
+#endif
 		{
 			ripoff_core_set_album(core, "Untitled Album");
 			ripoff_core_set_artist(core, "Unknown Artist");
@@ -174,7 +174,7 @@
 		}
 	
 		
-		close(drive);
+		free(drive);
 	}
 
 	return TRUE;	
